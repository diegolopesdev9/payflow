TAREFA: Corrigir Bills.tsx para atualizar corretamente ap√≥s marcar como pago e melhorar visual.

INSTRU√á√ïES CR√çTICAS:
- MODIFIQUE APENAS src/pages/Bills.tsx
- N√ÉO modifique nenhum outro arquivo
- Mostre o diff antes de aplicar
- Aguarde confirma√ß√£o

PROBLEMA IDENTIFICADO:
O backend est√° salvando corretamente (logs mostram "‚úÖ Bill atualizado: is_paid: true"), mas o frontend n√£o atualiza a lista. Precisamos for√ßar o refetch correto.

ARQUIVO A MODIFICAR: src/pages/Bills.tsx

MUDAN√áAS NECESS√ÅRIAS:

MUDAN√áA 1 - Corrigir a mutation do togglePaid:

LOCALIZAR a mutation togglePaidMutation (aproximadamente linha 55-75):

const togglePaidMutation = useMutation({
  mutationFn: async ({ id, isPaid }: { id: string; isPaid: boolean }) => {
    const response = await fetchWithAuth(`/api/bills/${id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ isPaid }),
    });
    if (!response.ok) throw new Error('Failed to update bill');
    return response.json();
  },
  onSuccess: () => {
    queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
    queryClient.invalidateQueries({ queryKey: ['/api/bills/upcoming'] });
    toast({
      title: "Status atualizado!",
      description: "O status da conta foi alterado com sucesso.",
    });
  },
  onError: () => {
    toast({
      title: "Erro ao atualizar",
      description: "N√£o foi poss√≠vel atualizar o status da conta.",
      variant: "destructive",
    });
  },
});

SUBSTITUIR POR:

const togglePaidMutation = useMutation({
  mutationFn: async ({ id, isPaid }: { id: string; isPaid: boolean }) => {
    console.log('üîÑ Enviando PUT:', { id, isPaid });
    const response = await fetchWithAuth(`/api/bills/${id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ isPaid }),
    });
    console.log('üì° Response status:', response.status);
    if (!response.ok) {
      const error = await response.json();
      console.error('‚ùå Erro do servidor:', error);
      throw new Error(error.error || 'Failed to update bill');
    }
    const data = await response.json();
    console.log('‚úÖ Resposta:', data);
    return data;
  },
  onSuccess: (data) => {
    console.log('‚úÖ Mutation success, invalidando queries...');
    // For√ßa refetch imediato
    queryClient.refetchQueries({ queryKey: ['/api/bills'] });
    queryClient.refetchQueries({ queryKey: ['/api/bills/upcoming'] });
    toast({
      title: "Status atualizado!",
      description: `Conta marcada como ${data.isPaid ? 'paga' : 'pendente'}.`,
    });
  },
  onError: (error: any) => {
    console.error('‚ùå Mutation error:', error);
    toast({
      title: "Erro ao atualizar",
      description: error.message || "N√£o foi poss√≠vel atualizar o status da conta.",
      variant: "destructive",
    });
  },
});

MUDAN√áA 2 - Ajustar visual (remover opacity, adicionar borda verde):

LOCALIZAR o Card className (aproximadamente linha 200):
${bill.isPaid ? 'opacity-60' : ''}

SUBSTITUIR POR:
${bill.isPaid ? 'border-l-4 border-l-green-500' : ''}

MUDAN√áA 3 - Remover line-through do t√≠tulo:

LOCALIZAR o h3:
className={`font-semibold text-primary-foreground ${bill.isPaid ? 'line-through' : ''}`}

SUBSTITUIR POR:
className="font-semibold text-primary-foreground"

MUDAN√áA 4 - Ajustar cor do valor tachado:

LOCALIZAR o span do valor:
${bill.isPaid ? 'line-through text-primary-foreground/60' : 'text-accent'}

SUBSTITUIR POR:
${bill.isPaid ? 'line-through text-primary-foreground/80' : 'text-accent'}

EXPLICA√á√ÉO:
- Troca invalidateQueries por refetchQueries (for√ßa atualiza√ß√£o imediata)
- Adiciona logs para debugging
- Melhora feedback do toast mostrando o status atual
- Remove opacidade (mant√©m legibilidade)
- Borda verde indica paga
- Apenas valor fica tachado

VALIDA√á√ÉO:
Ap√≥s aplicar, clicar no c√≠rculo ‚óã e verificar que:
1. Toast aparece "Status atualizado!"
2. Conta atualiza visualmente (borda verde + valor tachado)
3. Conta vai para o final da lista

N√ÉO MODIFIQUE MAIS NADA. Mostre o diff e aguarde confirma√ß√£o.